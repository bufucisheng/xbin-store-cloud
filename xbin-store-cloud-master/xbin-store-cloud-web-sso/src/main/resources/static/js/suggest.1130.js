/* user-reg/1.0.0 suggest.1130.js Date:2016-12-08 17:48:02 */
define("/js/suggest.1130.js",[],function(){var c={type:"default",items:[],customerClass:"",container:null,onshow:$.noop,onSelected:$.noop,highlight:"current",selected:"selected",wrapper:null};function d(a,b){this.$elem=b,this.options=$.extend(!0,{},c,a),this.init()}d.prototype={init:function(){this.suggestContainer=$('<ul class="suggest-container '+this.options.customerClass+'"></ul>'),this.options.container=this.options.container||this.$elem.parent(),this.options.wrapper?(this.options.container.append(this.options.wrapper),this.options.container.find(".overview").append(this.render(this.options.items))):this.options.container.append(this.render(this.options.items)),this.bindEvent()},render:function(a){var c,b="";if(a){for(c=0;c<a.length;c++){var d=a[c],e=$.isPlainObject(d)&&d.id?"item_id="+d.id:"",f=$.isPlainObject(d)&&d.disable?"disable":"",g=$.isPlainObject(d)?d.value:d;b+=a.length-1==c?"<li "+e+' class="suggest-li-last '+f+'"><div class="value">'+g+"</div></li>":"<li "+e+' class="'+f+'"><div class="value">'+g+"</div></li>"}return this.suggestContainer.html(b),this.items=this.suggestContainer.find("li:not(.disable)"),this.suggestContainer}},bindEvent:function(){this.suggestPanleEvent(),this.inputEvent()},suggestPanleEvent:function(){var a=this;this.suggestContainer.on({mouseover:function(){a.setHighlight($(this))},mousedown:function(){return a.onselected($(this)),a.setSelected($(this)),!1}},"li:visible:not(.disable)")},onselected:function(a){var b=this;var c=this.isInput();if(b.$elem.is("#select-country"))var d=$(".value",a).html()+'<a href="javascript:void(0) "class="arrow"></a>';else var d=$(".value",a).html();c?b.$elem.val(d):b.$elem.html(d),b.hide(),b.$elem.trigger("focusout"),$.isFunction(b.options.onSelected)&&b.options.onSelected(a),$(document).off("keydown.suggest")},isIE:function(){var a=!!window.ActiveXObject;var b=a&&!window.XMLHttpRequest;var c=a&&!!document.documentMode;var d=a&&!b&&!c;return b||d||c},inputEvent:function(){var a=this;var b=-1;var c=this.$elem;var d=a.isInput();var e=$(document);if(d){var f;c.on("keydown.suggest",function(c){return f=a.getItems(),40==c.keyCode?(b=b<f.length-1?++b:0,a.setHighlight(f.eq(b)),!1):38==c.keyCode?(b=1>b?f.length-1:--b,a.setHighlight(f.eq(b)),!1):13==c.keyCode?(0>b||(a.onselected(f.eq(b)),b=-1),!1):void 0}),c.on("keyup.suggest",function(b){return 13==b.keyCode?(a.hide(),setTimeout(function(){a.$elem.trigger("focusout")},100),!0):void 0}),"email"===a.options.type&&c.on("keyup.email",function(b){if(13!=b.keyCode){var d=a.items;var e=c.val();var f=e.indexOf("@");""==e?a.hide():a.show(),d.each(function(b){var c=$(this).find(".value");var d=c.html().toString().toLowerCase();if(e.toLowerCase()==d)return void a.hide();if(f>0){var g=e.substring(f);var h=e.substring(0,f);return c.html(h+a.options.items[b]),void(d.indexOf(g)<0?$(this).hide():$(this).show())}c.html(e+a.options.items[b])}),0==a.getItems().length&&a.hide(),c.on("focusout",function(){a.hide()})}})}else c.on("click.suggest",function(){return e.on("keydown.suggest",function(c){var d=a.items;return 40==c.keyCode&&(b=b<d.length-1?++b:0,a.setHighlight(d.eq(b))),38==c.keyCode&&(b=1>b?d.length-1:--b,a.setHighlight(d.eq(b))),13==c.keyCode&&a.onselected(d.eq(b)),!1}),e.on("click.suggest",function(b){$(b.target).closest("#scrollbar1").length>0||(a.hide(),e.off("keydown.suggest"))}),"hidden"==$("#scrollbar1").css("visibility")||"none"==$("#scrollbar1").css("display")?a.show():a.hide(),!1})},getItems:function(){return this.suggestContainer.find("li:visible:not(.disable)")},isInput:function(){return"INPUT"===this.$elem[0].tagName},setHighlight:function(a){var b=this.options.highlight;a.addClass(b).siblings().removeClass(b)},setSelected:function(a){var b=this.options.selected;a.addClass(b).siblings().removeClass(b)},show:function(){this.suggestContainer.show(),$.isFunction(this.options.onshow)&&this.options.onshow(),this.suggestContainer.closest(".form-item").css("z-index",15)},hide:function(){this.suggestContainer.hide(),this.items.removeClass(this.options.highlight),$("#scrollbar1").hide(),"none"==$(".suggest-container").css("display")&&this.suggestContainer.closest(".form-item").css("z-index",12)}},$.fn.suggest=function(a){return 1==$(this).length?new d(a,$(this)):void 0}});
