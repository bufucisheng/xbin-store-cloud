/* user-passport/1.0.0 login.countrycode-1130.js Date:2016-12-08 17:03:10 */
define("user/passport/1.0.0/js/login.countrycode-1130.js",["jdf/1.0.0/ui/switchable/1.0.0/switchable.js","user/passport/1.0.0/js/login.pubSub.js"],function(require,a){require("jdf/1.0.0/ui/switchable/1.0.0/switchable.js");var d=require("user/passport/1.0.0/js/login.pubSub.js");var e={elelist:{formlogin:$(".login-form"),loginname:$("#loginname")},countries:[],tpl:'<div id="country_code_layer"> <iframe frameborder= "0" scrolling="no" style="background-color:transparent; position: absolute; z-index: -1; width: 100%; height: 100%; top: 0; left:0;"></iframe>        <a class="arrow" ></a>        <div class="switchbar">        <a class="ui-switchable-item">\u70ed\u95e8</a>        <a class="ui-switchable-item">\u4e9a\u6d32</a>        <a class="ui-switchable-item">\u7f8e\u6d32</a>        <a class="ui-switchable-item">\u6b27\u6d32</a>        <a class="ui-switchable-item">\u5927\u6d0b\u6d32</a>        <a class="ui-switchable-item">\u975e\u6d32</a>        </div>    <ul class="ui-switchable-panel-main">',resetPosition:function(){var a=this.elelist.selector.offset();var b=a.top;var c=a.left;this.elelist.layer.offset({top:b+30,left:c-198})},fillData:function(){var a=this.tpl;var b='<div class="ui-switchable-panel"><ul>';var c="";var d="";var e="";var f="";var g="";var h="";var i="</ul></div>";var j=this.countries;for(var k=0;k<j.length;k++)switch(j[k].continent){case 0:c+='<li><a href="javascript:void(0)" data-code="'+j[k].id+'">'+j[k].value+"</a></li>";break;case 1:d+='<li><a href="javascript:void(0)" data-code="'+j[k].id+'">'+j[k].value+"</a></li>";break;case 2:e+='<li><a href="javascript:void(0)" data-code="'+j[k].id+'">'+j[k].value+"</a></li>";break;case 3:f+='<li><a href="javascript:void(0)" data-code="'+j[k].id+'">'+j[k].value+"</a></li>";break;case 4:g+='<li><a href="javascript:void(0)" data-code="'+j[k].id+'">'+j[k].value+"</a></li>";break;case 5:h+='<li><a href="javascript:void(0)" data-code="'+j[k].id+'">'+j[k].value+"</a></li>"}return a+=b+c+i+b+d+i+b+e+i+b+f+i+b+g+i+b+h+i,a+="</ul></div>"},getCountryItems:function(){var a=this;$.ajax({type:"GET",url:"//passport.jd.com/uc/countryItems",dataType:"json",success:function(b){b&&(a.countries=b,!$("#country_code_layer").length>0?a.elelist.formlogin.after(a.fillData()):$("#country_code_layer").prop("outerHTML",a.fillData()),a.bindEvent())}})},bindEvent:function(){var a=this;a.elelist.layer=$("#country_code_layer"),a.elelist.selector=$("#country_code_selector"),a.elelist.close=$("#close_button"),a.elelist.areacode=$(".ui-switchable-panel a"),$(document).bind("click",function(b){$(b.target).closest("#country_code_layer").length<1&&$(b.target).closest("#select-country").length<1&&(a.elelist.layer.hide(),$.browser.safari&&$("#entry").css("visibility","visible"))}),$("body").delegate("#country_code_selector","hover",function(){a.elelist.layer.show(),$.browser.safari&&$("#entry").css("visibility","hidden"),$.browser.msie&&$("#loginname").blur(),a.resetPosition()}),a.elelist.close.bind("click",function(){a.elelist.layer.hide(),$.browser.safari&&$("#entry").css("visibility","visible"),d.publish("username.focus"),setTimeout(function(){if($("#loginname").focus(),$.browser.msie){var a=$("#loginname")[0].createTextRange();a.moveStart("character",$("#loginname").val().length),a.collapse(!0),a.select()}},180)}),a.elelist.areacode.bind("click",function(){a.elelist.layer.hide(),$.browser.safari&&$("#entry").css("visibility","visible"),a.elelist.loginname.val($(this).attr("data-code")),d.publish("username.focus"),setTimeout(function(){if($("#loginname").focus(),$.browser.msie){var a=$("#loginname")[0].createTextRange();a.moveStart("character",$("#loginname").val().length),a.collapse(!0),a.select()}},180)}),a.elelist.layer.switchable({type:"tab",navItem:"ui-switchable-item",navSelectedClass:"ui-switchable-selected",contentClass:"ui-switchable-panel-main",mainClass:"ui-switchable-panel",hasPage:!0,speed:"fast",seamlessLoop:!0}),$(window).resize(function(){a.resetPosition()})},init:function(){var a=this;a.getCountryItems()}};function f(){return e.init()}a.init=f});
