/* user-reg/1.0.0 countrycode.1130.js Date:2016-12-08 17:48:04 */
define("/js/countrycode.1130.js",["jdf/1.0.0/ui/switchable/1.0.0/switchable.js"],function(require,a){require("jdf/1.0.0/ui/switchable/1.0.0/switchable.js");var d={};var e={elelist:{form_item_phone:$(".form-item-phone"),loginname:$("#loginname")},countries:[],tpl:'<div id="country_code_layer"> <iframe frameborder= "0" scrolling="no" style="background-color:transparent; position: absolute; z-index: -1; width: 100%; height: 100%; top: 0; left:0;"></iframe>        <a class="arrow" ></a>        <div class="switchbar">        <a class="ui-switchable-item">\u70ed\u95e8</a>        <a class="ui-switchable-item">\u4e9a\u6d32</a>        <a class="ui-switchable-item">\u7f8e\u6d32</a>        <a class="ui-switchable-item">\u6b27\u6d32</a>        <a class="ui-switchable-item">\u5927\u6d0b\u6d32</a>        <a class="ui-switchable-item">\u975e\u6d32</a>        </div>    <ul class="ui-switchable-panel-main">',resetPosition:function(){var a=this.elelist.selector.offset();var b=a.top;var c=a.left;this.elelist.layer.offset({top:b+30,left:c-198})},fillData:function(){var a=this.tpl;var b='<div class="ui-switchable-panel"><ul>';var c="";var e="";var f="";var g="";var h="";var i="";var j="</ul></div>";var k=this.countries;for(var l=0;l<k.length;l++)switch(d[k[l].id+""]="0086"==k[l].id?"^(13|15|18|14|17)[0-9]{9}$":"^[0-9]{"+k[l].length+"}$",k[l].continent){case 0:c+='<li><a href="javascript:void(0)" data-code="'+k[l].id+'">'+k[l].value+"</a></li>";break;case 1:e+='<li><a href="javascript:void(0)" data-code="'+k[l].id+'">'+k[l].value+"</a></li>";break;case 2:f+='<li><a href="javascript:void(0)" data-code="'+k[l].id+'">'+k[l].value+"</a></li>";break;case 3:g+='<li><a href="javascript:void(0)" data-code="'+k[l].id+'">'+k[l].value+"</a></li>";break;case 4:h+='<li><a href="javascript:void(0)" data-code="'+k[l].id+'">'+k[l].value+"</a></li>";break;case 5:i+='<li><a href="javascript:void(0)" data-code="'+k[l].id+'">'+k[l].value+"</a></li>"}return a+=b+c+j+b+e+j+b+f+j+b+g+j+b+h+j+b+i+j,a+="</ul></div>"},getCountryItems:function(){var a=this;$.ajax({type:"post",url:"//passport.jd.com/uc/countryItems?callback=?&code=0&r="+Math.random(),dataType:"jsonp",success:function(b){b&&(a.countries=b,!$("#country_code_layer").length>0?a.elelist.form_item_phone.before(a.fillData()):$("#country_code_layer").prop("outerHTML",a.fillData()),a.bindEvent())}})},bindEvent:function(){var a=this;a.elelist.layer=$("#country_code_layer"),a.elelist.selector=$("#country_code_selector"),a.elelist.close=$("#close_button"),a.elelist.areacode=$(".ui-switchable-panel a"),$("#select-country").on("click",function(){a.elelist.layer.toggle()}),$(document).on("click",function(b){$(b.target).closest("#country_code_layer").length<1&&$(b.target).closest("#select-country").length<1&&a.elelist.layer.hide()}),a.elelist.areacode.bind("click",function(){a.elelist.layer.hide(),$("#select-country").attr("country_id",$(this).attr("data-code")),$("#select-country").html($(this).text()+'<a href="javascript:void(0) "class="arrow"></a>'),$(".form-item-phone").hasClass("form-item-error")&&""!=$(".input-tip").find("#form-phone-error").text()&&$(".input-tip").find("#form-phone-error").show(),$("#select-country").text().length>7&&($("#select-country").text($("#select-country").text().substring(0,5)+"..."),$("#select-country").append('<a href="javascript:void(0)" class="arrow"></a>')),"0086"==$(this).attr("data-code")?$("#form-phone").attr("default",'<i class="i-def"></i>\u5b8c\u6210\u9a8c\u8bc1\u540e\uff0c\u4f60\u53ef\u4ee5\u7528\u8be5\u624b\u673a\u767b\u5f55\u548c\u627e\u56de\u5bc6\u7801'):($(".form-item-phone").next(".input-tip").find(".orange").text("\u201c"+$(this).attr("data-code")+"\u201d"),$("#form-phone").attr("default",'<i class="i-def"></i>\u4f7f\u7528\u624b\u673a\u767b\u5f55\u65f6\uff0c\u8bf7\u5728\u53f7\u7801\u524d\u6dfb\u52a0\u56fd\u5bb6\u533a\u53f7<span class="orange">\u201c'+$(this).attr("data-code")+"\u201d</span>")),$("#form-phone").focus(),$("#form-phone").blur(),$("#form-phone").focus()}),a.elelist.layer.switchable({type:"tab",navItem:"ui-switchable-item",navSelectedClass:"ui-switchable-selected",contentClass:"ui-switchable-panel-main",mainClass:"ui-switchable-panel",hasPage:!0,speed:"fast",seamlessLoop:!0}),$(window).resize(function(){})},init:function(){var a=this;return a.getCountryItems(),d}};function f(){return e.init()}a.init=f});
