define("home/widget/head",["/js2/dropdown.js","/js2/dialog.js","/js2/trimPath.js","/js2/login.js","/js2/event.js","/js2/hotkey.js","/js2/globalReco.js","/js2/cookie.js","/js2/search.js","/js2/localStorage.js","/js2/shoppingcart.js","/js2/log.js","home/widget/head_areamini","home/widget/head_myjd","home/widget/head_setUserinfo"],function(require,exports,module){var t=require("/js2/hotkey.js");require("/js2/search.js");var a,i=require("/js2/shoppingcart.js"),e=require("/js2/cookie.js"),n=function(t,a){var i=!1,e=!1;return function(){return i?void(e=!0):(i=!0,setTimeout(function(){i=!1,e&&(t(),e=!1)},a),void t())}},s=require("conf"),o=function(){var t=(e("__jda")||"").split(".");t=t.length>=2?t[1]:"-1",$.ajax({url:s.INTERFACE.HOT_WORDS,data:{pin:e("pin")||0,uuid:t},dataType:"jsonp",scriptCharset:"utf-8",cache:!0,jsonpCallback:"cathot",success:function(t){if(t&&"object"==typeof t){t=t.data;var a="",i=[],e=0;if($.each(t,function(t,n){var s="h|keycount|2016|03b"+(t<9?"0":"")+(1+t);if(n.n)if(2==n.c)i.push(n.n);else if(e<9){var o=1==n.c?'class="style-red"':"";a+='<a href="'+n.u+'" target="_blank" '+o+' clstag="'+s+'">'+n.n+"</a>",e++}}),i.length){var n=Math.floor(i.length*Math.random()),s=i[n];$("#search #key").val(s).bind("focus",function(){var t=this;t.value==s&&(t.value="",t.style.color="#333")}).bind("blur",function(){var t=this;t.value||(t.value=s,t.style.color="#999")})}$("#hotwords").html(a)}}})},d=function(){var t=$("#ttbar-mycity .ui-areamini-text-wrap");t.prepend('<i class="iconfont">&#xe604;</i>')},c=$(window);a=function(){this.opts={},this.$el,this._state=0},a.prototype._judge=function(){c.scrollTop()>this.opts.offset&&0==this._state?(this._state=1,this.$el.addClass("search-fix")):c.scrollTop()<=this.opts.offset&&1==this._state&&(this._state=0,this.$el.removeClass("search-fix"))},a.prototype._bind=function(){var t=this;c.bind("scroll.searchFix",n(function(){t._judge()},100))},a.prototype.init=function(t){$.extend(this.opts,{offset:788},t),this.$el=$(this.opts.el),this._judge(),this._bind()};var r=function(){var t=$("#key");$("#shortcut").bind("mouseenter",function(){t.blur()})},l=(require("js2/log.js"),require("js2/dropdown.js"),require("home/widget/head_areamini"),require("home/widget/head_setUserInfo")),u=require("home/widget/head_myjd"),m=require("/js2/localStorage.js"),e=require("/js2/cookie.js"),h='<div class="dd-spacer"></div><div class="dd-inner"><span class="loading"></span></div>';new l({$userName:$("#ttbar-login")}).init();var v='    <div class="dt cw-icon ui-areamini-text-wrap" style="display:none;">      <i class="ci-right"><s>◇</s></i>      <i class="ci-left"></i>      <span class="ui-areamini-text"></span>     </div>    <div class="dd dorpdown-layer">      <div class="dd-spacer"></div>      <div class="ui-areamini-content-wrap">         <div class="ui-areamini-content"></div>       </div>     </div>  ';$("#ttbar-mycity").html(v).areamini({hasCssLink:!1,className:{hover:"hover",selected:"selected"},provinceList:[{name:"海外",tpl:'<div class="item"><a href="//en.jd.com/" target="_blank" data-onchange="1"><%=name%></a></div>'}],tplContentWrap:'<div class="ui-areamini-content-list"><%=list%></div>',tplContentItem:'<div class="item"><a data-id="<%=id%>" href="javascript:void(0)"><%=name%></a></div>',syncServer:!0,writeCookie:!1,threeWordDeal:function(t){var a=t.find(".ui-areamini-text").html(),i=t.find(".dd-spacer");3==a.length?i.addClass("dd-spacer-extend"):i.removeClass("dd-spacer-extend")},onReady:function(t){this.el.find(".ui-areamini-text-wrap").show();var a=e("areaId");if(m.check()&&a){var i="areaId";m.get(i)?m.get(i)!=a&&(m.set(i,a),m.clearByReg("^jd_home_2015_")):m.set(i,a)}this.options.threeWordDeal(this.el)},onChange:function(t,a,i){this.options.threeWordDeal(this.el),"undefined"!=typeof a&&window.location.reload()}}),u();var f='    <div class="dd dorpdown-layer">      <div class="dd-spacer"></div>      <div class="dd-inner" id="ttbar-apps-main">'+h+"      </div>    </div>  ";$("#ttbar-apps").append(f).attr("aid","2_955_6342").dropdown({enterDelay:50,trigger:!0,current:"hover",onchange:function(t){t.attr("data-load")||(t.attr("data-load",1),$.ajax({url:"//nfa.jd.com/loadFa.js?aid=2_955_6342",dataType:"script",success:function(t){}}))}});var p='    <div class="dd dorpdown-layer">      <div class="dd-spacer"></div>      <div class="dd-inner" id="ttbar-atte-main">'+h+"      </div>    </div>  ";$("#ttbar-atte").append(p).attr("aid","2_955_6494").dropdown({enterDelay:50,trigger:!0,current:"hover",onchange:function(t){t.attr("data-load")||(t.attr("data-load",1),$.ajax({url:"//nfa.jd.com/loadFa.js?aid=2_955_6494",dataType:"script",success:function(t){}}))}}),$("#ttbar-serv .dd").html(h),$("#ttbar-serv").dropdown({enterDelay:50,trigger:!0,current:"hover",onchange:function(t){if(!t.attr("data-load")){t.attr("data-load",1);var a=setTimeout(function(){i("//d.jd.com/client/get")},3e3),i=function(t){$.ajax({url:t,dataType:"jsonp",scriptCharset:"gb2312",cache:!0,jsonpCallback:"getClientCallback",success:function(t){if(t&&"object"==typeof t){clearTimeout(a),t=t.data;var i='<div class="dd-spacer"></div>',e=['<div class="item-client">客户</div>'],n=['<div class="item-business">商户</div>'];$.each(t,function(a){var i=t[a],s=!i.type;0==i.c&&e.push('<div class="item"><a href="'+i.u+'" target="_blank" '+s+">"+i.n+"</a></div>"),1==i.c&&n.push('<div class="item"><a href="'+i.u+'" target="_blank" '+s+">"+i.n+"</a></div>")}),i+=e.join(""),n.length>1&&(i+=n.join("")),$("#ttbar-serv .dd").html(i)}}})};i("//dc.3.cn/client/get")}}}),$("#ttbar-navs .dd").html(h),$("#ttbar-navs").dropdown({enterDelay:50,trigger:!0,current:"hover",leaveDelay:100,onchange:function(t){if(!t.attr("data-load")){t.attr("data-load",1);var a=setTimeout(function(){i("//d.jd.com/navigation/get")},3e3),i=function(t){$.ajax({url:t,dataType:"jsonp",scriptCharset:"gb2312",cache:!0,jsonpCallback:"getNavigationCallback",success:function(t){if(t&&"object"==typeof t){clearTimeout(a),t=t.data;var i='<div class="dd-spacer"></div>';$.each(t,function(a){var e=t[a],n=e.s,s="";$.each(n,function(t){var a=n[t],i=a.c?'class="'+a.c+'"':"";s+='<div class="item"><a href="'+a.u+'" target="_blank" '+i+">"+a.n+"</a></div>"});var o=e.n,d=e.c?'class="'+e.c+'"':"";e.u&&(o='<a href="'+e.u+'" target="_blank" '+d+">"+e.n+"</a>"),i+='<dl class="fore'+(a+1)+'">                <dt>'+o+"</dt>                <dd>                  "+s+"                </dd>              </dl>"}),$("#ttbar-navs .dd").html(i)}}})};i("//dc.3.cn/navigation/get")}}}),!function(){var t=$("#J_mobile"),a=$("#J_mobile_pop"),i=!1,e=null;t.bind("mouseenter",function(n){clearTimeout(e),e=setTimeout(function(){t.addClass("mobile_on"),i||(i=!0,seajs.use("home/widget/mobile_pop",function(t){t({$el:a})}))},200)}),t.bind("mouseleave",function(a){clearTimeout(e),t.removeClass("mobile_on")})}(),module.exports.init=function(){d(),t(),i(),o(),r()},module.exports.searchFix=new a});