define("home/widget/elevator",["HOME_BASE/util.js"],function(require,exports,module){"use strict";var t=_.Class.extend({construct:function(t){this.conf=$.extend({$el:null},t),this.init()},init:function(){this.w=window,this.elevatorPos=50,this.$elevatorEles=$(".J_f_lift"),this.elevatorElesId=this.$elevatorEles.map(function(){return $(this).attr("id")}).toArray(),this.$firstElevatorFloor=this.$elevatorEles.eq(0),this.setStyle(),this.initEvent(),this.scrollTimer=null},initEvent:function(){var t=this.conf.$el;require("HOME_BASE/util.js");t.delegate(".J_lift_item","click",$.proxy(this.go,this)),$(this.w).bind("scroll.elevator",$.proxy(this.onScroll,this)),_.eventCenter.on("home:resize",$.proxy(function(){var e=$(this.w),i=e.scrollTop(),o=this.$firstElevatorFloor.offset().top;this.setStyle(),i>=o-e.height()/2+5&&t.show()},this)),_.eventCenter.on("render:floorChange",$.proxy(function(t){var e=this.elevatorElesId,i=$.inArray(t,e);i>=0&&(this.elevatorElesId.splice(i,1),$("#"+t).removeClass("J_f_lift"),this.$elevatorEles=$(".J_f_lift"),this.conf.$el.find(".J_lift_item").eq(i).remove())},this))},setStyle:function(){var t=this.conf.$el,e=document.documentElement.clientWidth,i=1190,o=parseInt(.5*document.documentElement.clientHeight-.5*t.height(),10);t.css({left:(e-i)/2-t.width()-40,top:o}),e<1380&&t.css({left:"10px"})},go:function(t){t&&t.preventDefault();var e=$(t.currentTarget),i=e.index(),o=0;e.hasClass("J_lift_item_top")||(this.clicked=!0,o=this.$elevatorEles.eq(i).offset().top-this.elevatorPos,this.conf.$el.find(".J_lift_item").removeClass("lift_item_on").eq(i).addClass("lift_item_on")),$("body,html").stop(!1,!0).animate({scrollTop:o},600,$.proxy(function(){this.clicked=!1},this))},onScroll:function(t){var e=this,i=$(document);e.clicked||(clearTimeout(e.scrollTimer),e.scrollTimer=setTimeout(function(){var t=i.scrollTop(),o=e.conf.$el,l=-1,s=$(e.w).height()/2;t+s>=e.$firstElevatorFloor.offset().top?(o.fadeIn(),e.$elevatorEles.each(function(){t+s>=$(this).offset().top&&(l+=1)}),o.find(".J_lift_item").removeClass("lift_item_on").eq(l).addClass("lift_item_on")):o.fadeOut()},200))}});return t});