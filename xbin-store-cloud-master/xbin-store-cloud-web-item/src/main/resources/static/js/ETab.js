/*!Name: ETab.js
 * Date: 2016-3-17 18:29:20 */
!function(t,e,i){"use strict";function s(e,i){this.$el=e,this.settings=t.extend(!0,{},a,i),this.index=0,this._defaults=a,this._name=n,this._version=o,this.init()}var n="ETab",o="@VERSION",a={event:"click",delay:0,defaultIndex:null,current:"current",lazyload:null,selector:{trigger:'[data-tab="trigger"]',item:'[data-tab="item"]',anchor:"[data-anchor]"},onReady:function(){},onSwitch:function(){}};s.prototype={init:function(){var t=this.settings,e=t.selector;this.triggers=this.$el.find(e.trigger),this.items=this.$el.find(e.item),this.anchors=this.$el.find(e.anchor),this.triggers.length!==this.items.length?console.log("\u300c%s - %s\u300d The tab item count must equals to tab content count.",n,this.$el.selector):(this.bindEvent(),"number"==typeof t.defaultIndex&&this.triggers.eq(t.defaultIndex).trigger(t.event),t.onReady.call(this,t.defaultIndex)),/mouseover|mouseenter/.test(t.event)&&!t.delay&&(this.settings.delay=200)},bindEvent:function(){var e=this,i=e.settings,s=i.selector,n=i.event+".ETab";this.$el.undelegate(n).delegate(s.trigger,n,function(){e.handleEvent(t(this))}),/mouseover|mouseenter/.test(i.event)&&this.$el.undelegate("mouseout mouseleave").delegate(s.trigger,"mouseout mouseleave",function(){clearTimeout(e.timer)})},handleEvent:function(t){var e=this,i=this.triggers.index(t);clearTimeout(this.timer),this.timer=setTimeout(function(){e.go(i)},this.settings.delay)},go:function(e){var i=this.triggers,s=i.eq(e),n=s.attr("data-anchor");if(i.removeClass(this.settings.current),s.addClass(this.settings.current),s.is(this.settings.selector.anchor)){var o="#none";setTimeout(function(){n&&(o=t(n).offset().top),t("html,body").scrollTop(o)},100)}this.index=e,this.items.hide().eq(e).show(),this.settings.onSwitch.call(this,e),this.settings.lazyload&&this.loadImages(this.items.eq(e))},loadImages:function(e){var i=this.settings.lazyload,s=e.find("["+i+"]");s.each(function(){var e=t(this).attr(i);e&&t(this).attr("src",e).removeAttr(i)})}},t.fn[n]=function(e){return this.length?this.each(function(){var i=new s(t(this),e);t(this).data(n)||t(this).data(n,i)}):(console.log("\u300c"+n+"\u300d The elements["+this.selector+"] you passed is empty."),this)}}(jQuery,window,document);
