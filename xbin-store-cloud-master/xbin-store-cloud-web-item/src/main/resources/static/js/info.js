/*!Name: info.js
 * Date: 2017-2-14 17:14:17 */
define("MOD_ROOT/js/info",function(require,exports,module){function t(t,e){this.$el=t,this.len=e,this.items=[],this.items.length=e}function e(t){function e(t){if(!t||!t.stock)return!1;var e=t.stock.stock,o=e.cla;if(o&&o.length){for(var r="",s=0;s<o.length;s++){var a=o[s];r+=n.format(a.id,a.url,a.name)}i.show().find(".tips-list").html(r)}else i.hide().find(".tips-list").html("")}var i=$("#local-tips"),n='<li>\xb7<a data-aid="{0}" href="{1}" target="_blank" clstag="shangpin|keycount|product|bendihuodong-{2}">{2} &gt;&gt;</a></li>';e(),r.addListener("onStockReady",e)}function i(t){function e(){if(l)for(var t=0;t<a.length;t++)s.set(a[t].order,a[t].tip)}function i(e){var i=t.isHeYue;i&&!e.noBuyType?s.set(7,'<a target="_blank" href="//sale.jd.com/act/IgFRVepkJKr.html">\u8bf7\u9605\u8bfb\u5408\u7ea6\u673a\u8d2d\u4e70\u8bf4\u660e &gt;&gt;</a>'):s.del(7)}function n(t){var e="//authpay.jd.com/auth/toAuthPage.action?source=62&directReturnUrl="+location.href,i='\u8be5\u5546\u54c1\u9700\u8981\u5b9e\u540d\u8ba4\u8bc1\u624d\u53ef\u62a2\u8d2d\uff0c<a target="_blank" href="{0}">\u53bb\u5b9e\u540d &gt;&gt;</a>'.format(e);t.r&&"1"===t.r.shiming?s.set(9,i):s.del(9)}function o(t){var i=t.area.id[0];52993==i?s.set(3,"\u4e0d\u652f\u63017\u5929\u65e0\u7406\u7531\u9000\u8d27"):e()}var a=t.tips,l=a&&a.length;e(),r.addListener("onHeYueReady",i),r.addListener("onKOReady",n),r.addListener("onStockReady",o)}function n(){var t=$(".J-mobile-only"),e=t.find(".qrcode");if(t.length){var i=e.attr("data-url"),n=i||"//m.jd.com/product/"+pageConfig.product.skuid+".html?from=qrcode";require.async("PLG_ROOT/jQuery.qrcode",function(){e.jdQrcode({render:"image",ecLevel:"L",size:80,text:n})})}}function o(t){i(t),e(t),n(t)}var r=require("MOD_ROOT/js/event").Event;require("MOD_ROOT/js/tools");t.prototype={set:function(t,e){if(t>this.len)throw new Error("index error.");return e&&(this.items[t]=e,this.show()),this},del:function(t){this.items[t]=null,this.show(t)},show:function(){var t=this.items.length,e=0,i=[],n=this.$el.find("ol");for(e;t>e;e++)this.items[e]&&i.push("<li>\xb7"+this.items[e]+"</li>");i.length>0?(n.html(i.join("")),this.$el.show()):this.$el.hide()}};var s=pageConfig.__tips=new t($("#summary-tips"),10);module.exports.__id="info",module.exports.init=o,module.exports.Tip=s});