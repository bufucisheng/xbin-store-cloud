/*!Name: ko.js
 * Date: 2017-2-14 17:14:15 */
define("MOD_ROOT/js/ko",function(require,exports,module){var t=require("MOD_ROOT/js/event").Event,e={init:function(t){return this.cfg=t,this.$el=$("#choose-btn-ko"),t.isKO?(this.bindEvent(),this.get(),this):!1},bindEvent:function(){var e=this;t.addListener("onStockReady",function(t){e.isEnabled?e.enabled():e.disabled()})},get:function(){var t="//itemko.jd.com/itemShowBtn?skuId="+this.cfg.skuid;$.ajax({url:t,dataType:"jsonp",success:$.proxy(this.set,this)})},set:function(e){return e&&"3"===e.type?(/state=11/.test(location.href)&&(e.state="11"),/state=12/.test(location.href)&&(e.state="12"),/state=13/.test(location.href)&&(e.state="13"),this.buyUrl=e.url,this.show(),this.setBtnText(this.getButtonText(e)),this.isEnabled="12"===e.state,this.isEnabled?this.enabled():this.disabled(),void t.fire({type:"onKOReady",r:e})):(this.disabled(),this.hide(),!1)},enabled:function(){this.cfg.havestock?(this.$el.removeClass("btn-disable"),this.$el.attr("href",this.buyUrl)):this.disabled()},disabled:function(){this.$el.addClass("btn-disable"),this.$el.attr("href","#none")},show:function(){this.$el.show(),this.cfg.addToCartBtn.hide()},hide:function(){this.$el.hide(),this.cfg.addToCartBtn.show()},setBtnText:function(t){this.$el.html(t)},getButtonText:function(t){switch(t.state){case"11":return"\u62a2\u8d2d\u672a\u5f00\u59cb";case"12":return"\u62a2\u8d2d";case"13":return"\u62a2\u8d2d\u5df2\u7ed3\u675f";default:return"\u62a2\u8d2d"}}};module.exports=e,module.exports.__id="ko"});