/* product-search/1.0.2 main.js Date:2016-12-06 18:22:05 */
"undefined"==typeof window.searchUnit&&(window.searchUnit={}),define("js/main.js",["js/globalInit.js","js/switchable.js","js/tips.js","js/follow.js","js/lazyload.js","js/clslog.js","js/tools.js","js/pageInfo.js","js/utils.js","js/template.js","js/noResult.js","js/responsive.js","js/breadCrumb.js","js/sidebar.js","js/selector.js","js/goodsList.js","js/shopList.js","js/allResultBox.js","js/featuredGoods.js","js/couponBuy.js","js/coudanBuy.js","js/p-contrast.js","js/footprint-v2.js"],function(require){var c=require("js/globalInit.js");require("js/switchable.js");require("js/tips.js");require("js/follow.js");require("js/lazyload.js");require("js/clslog.js");require("js/tools.js");var j=require("js/pageInfo.js");var k=require("js/utils.js");require("js/template.js");var m=require("js/noResult.js");var n=require("js/responsive.js");var o=require("js/breadCrumb.js");var p=require("js/sidebar.js");var q=require("js/selector.js");var r=require("js/goodsList.js");var s=require("js/shopList.js");var t=require("js/allResultBox.js");var u=require("js/featuredGoods.js");var v=require("js/couponBuy.js");var w=require("js/coudanBuy.js");var x=require("js/p-contrast.js");var y=require("js/footprint-v2.js");n.init(),c(),j.isNoResultPage?m.init():(o.init(),q.init(),j.enableSidebar&&p.init(),s.init(),r.init(),j.enableAllResultBox&&($('<div class="w"><div id="J_yyk_recommend" class="m-box-s1 rec-goods-chosen"> <div class="mt"><strong class="mt-title">\u641c\u7d22\u201c'+j.KEYWORD+'\u201d\u7684\u5168\u90e8\u7ed3\u679c<a href="//search.jd.com/Search?keyword='+encodeURIComponent(j.KEYWORD)+'&enc=utf-8&qrst=unchange" target="_blank" class="more">\u67e5\u770b\u5168\u90e8&gt;</a></strong></div> <div class="mc"></div> </div></div>').insertBefore($("#J_promGoodsWrap_292").parent()),$("body").lazyload({type:"fn",source:$("#J_yyk_recommend"),space:500,onchange:t.init})),z(),j.isCoupon&&v.init({coupon:searchUnit.coupon}),j.isCoudan&&w.init({activityID:SEARCH.activity_id})),j.enableFooter&&$("body").lazyload({type:"fn",source:$("#footmark"),onchange:function(){y.init()}}),$("#J_bottom-ad").remove(),$("#footmark").parent().after('<div class="w" id="J_bottom-ad"><div class="m bottom-ad" id="J_promWrap_230"></div></div>'),$.ajax({url:"//x.jd.com/ShowInterface",data:{ad_ids:"230:1,1:1",template:0,ad_type:8,spread_type:1},dataType:"jsonp"}).then(function(a){var b='            <a target="_blank" href="${click_url}">                {if cai_type=="2"}                <img width="${width}" src="${image_url}">                {else}                <img width="${width}"  src="//img30.360buyimg.com/pop/${image_url}">                {/if}            </a>';a[230]&&a[230][0]&&($("#J_promWrap_230").html(b.process(a[230][0])),k.exposeAD(a[230]))}),j.enableContrast&&x.init(null,"_contrast"),searchUnit.setImgLazyload=function(a){var a=a||"body";$(a).lazyload({type:"img",placeholderClass:"err-product",errorClass:"err-poster",delay:20,space:200})},searchUnit.setImgLazyload("#J_main"),searchUnit.initAside=function(){j.refresh(),z(),j.enableSidebar&&p.init()};function z(){j.isLazyloadFeaturedGoods?$("body").lazyload({type:"fn",space:j.isShopResultPage?360:1278,source:$("#J_promGoodsWrap_292").parent(),onchange:function(){u.init({lazyload:!0})}}):u.init()}!function(){var a=!1;var b=null;var c=null;if(window.pageConfig&&"chaoshi"==window.pageConfig.actName&&(a=!0,b="//img14.360buyimg.com/uba/jfs/t3157/260/982318010/16426/159dd146/57c3f5e4N85a5a4e6.png",c="//img12.360buyimg.com/uba/jfs/t3031/232/1276127189/10392/c1095411/57c3f5e4N8a050672.png"),a){var d=$(window);var e=$("body > .w");function g(){var a={};var b=d.width();var c=e.width();return a.leftCoupletPosition=(b-c)/2-200,a.rightCoupletPosition=(b-c)/2+c,a.realWidth=(b-c)/2,a}var h=g();var i=$('<span class="skin-act-left"></span>');var j=$('<span class="skin-act-right"></span>');b&&i.css({background:"url("+b+") no-repeat"}),c&&j.css({background:"url("+c+") no-repeat"}),i.css({left:h.leftCoupletPosition}).appendTo("body"),j.css({left:h.rightCoupletPosition,width:h.realWidth}).appendTo("body");var k=null;d.bind("resize",function(){k||setTimeout(function(){var a=g();i.css({left:a.leftCoupletPosition}),j.css({left:a.rightCoupletPosition,width:a.realWidth})},20)})}}(),function(){if(window.SEARCH&&window.SEARCH.lottery_code){var a=window.SEARCH.lottery_code;if($.browser.isIE6())return;if(!a)return;function b(a){try{JA.tracker.ngloader("search.000011",$.extend({url:window.location.href},a))}catch(b){}}seajs.use(["jdf/1.0.0/unit/login/1.0.0/login","jdf/1.0.0/unit/insertStyles/1.0.0/insertStyles","jdf/1.0.0/ui/js/dialog"],function(c){c.isLogin(function(c){c&&$.ajax({url:"//l-activity.jd.com/lottery/lottery_start.action?lotteryCode="+a,dataType:"jsonp"}).then(function(a){if(a.data.winner){var c=a.data.promptMsg.split("#@@#");if(c.length<8)return;c[8]||(c[8]="//img10.360buyimg.com/uba/jfs/t3367/161/71339456/65932/a22c2242/57fe057dN3864fb16.png"),c[9]||(c[9]="//img11.360buyimg.com/uba/jfs/t3223/289/4056744225/4802/4f75c935/57fe05d5Ne374cedc.png");{$.browser.msie&&Number($.browser.version.split(".")[0])<10}var e='<div class="m-red-pocket">      <img class="pocket-light" src="'+c[8]+'" alt="" style="width: 0px;height:0px;margin-left:0px;margin-top:0px;"></img>      <div class="pocket-main">          <i class="pocket-close"></i>          <div class="pocket-content">              <div class="cover-back"></div>              <div class="inner-coupon">                  <div class="c-limit">'+c[4]+'</div>                  <div class="c-info">                      <div class="c-price"><strong>'+c[3]+'</strong><i class="unit">\u5143</i></div>                      <div class="c-type">'+c[5]+'</div>                  </div>                  <div class="c-time">\uff08\u4f7f\u7528\u65f6\u95f4\uff1a'+c[6]+'\uff09</div>              </div>              <div class="cover-front">                  <div class="c-tips"><h5>\u606d\u559c</h5><p>\u4f60\u83b7\u5f97\u795e\u79d8\u7ea2\u5305\u4e00\u4e2a\uff01</p></div>                  <a href="javascript:void(0)" target="_blank" class="J-get-pocket c-btn">\u7acb\u5373\u9886\u53d6</a>              </div>              <div class="pocket-head1"></div>              <div class="pocket-head2"></div>              <div class="pocket-seal">                  <div class="seal-mask"></div>                  <img src="'+c[9]+'" alt="" class="seal-content">              </div>              <div class="pocket-tips hide"><em>\u60a8\u53ef\u4ee5\u5728\u201c <a target="_blank" href="//quan.jd.com/user_quan.action">\u6211\u7684\u4eac\u4e1c-\u4f18\u60e0\u5238</a> \u201d\u4e2d\u67e5\u770b\u4f18\u60e0\u5238</em></div>          </div>      </div></div>';b({logtype:0}),$("body").dialog({width:990,height:990,type:"text",title:null,closeButton:!1,opacity:.6,extendMainClass:"dialog-red-pocket",source:e,onReady:function(){var a=this.el.find(".pocket-light");var d=this.el.find(".m-red-pocket");var e=d.find(".inner-coupon");a.css({opacity:0}).animate({opacity:.3,width:660,height:660,marginLeft:-330,marginTop:-330},150).animate({opacity:.6,width:540,height:540,marginLeft:-270,marginTop:-270},150).animate({opacity:.6,width:618,height:618,marginLeft:-309,marginTop:-309},150).animate({opacity:.8,width:582,height:582,marginLeft:-291,marginTop:-291},150).animate({opacity:1,width:600,height:600,marginLeft:-300,marginTop:-300},150),this.el.delegate(".J-get-pocket, .J-use-pocket","click",function(a){var f=$(this);return f.hasClass("J-get-pocket")?(a.preventDefault(),b({logtype:1,pos:1}),f.removeClass("J-get-pocket").addClass("J-use-pocket").text("\u53bb\u4f7f\u7528"),d.addClass("z-pocket-open"),d.find(".pocket-tips").show(),d.find(".c-tips").replaceWith('<div class="c-limit">'+(c[7]?"\u4f7f\u7528\u8303\u56f4\uff1a"+c[7]:"")+"</div>"),f.attr("href","//search.jd.com/Search?coupon_batch="+c[2]),void setTimeout(function(){e.animate({top:50},350)},200)):(b({logtype:1,pos:2}),void $.closeDialog())}),this.el.find(".pocket-close").bind("click",function(){b({logtype:1,pos:3}),$.closeDialog()})}})}})})})}}(),$("#J_searchWrap").tips({trigger:".J-picon-tips",tipsClass:"ui-tips-skin1",hasClose:!1,width:220,autoResize:!1,callback:function(a,b){if(!a.parents(".J-goods-list").hasClass("gl-type-5")){var c='<div class="picon-tips">'+a.get(0).outerHTML+a.data("tips")+"</div>";$(this).html(c);var d=parseInt(a.offset().left);var e=$.browser.msie&&$.browser.version<10?parseInt(a.parents(".gl-i-wrap").offset().left):parseInt(a.parents(".gl-i-wrap").offset().left)+1;b.css("left",e+"px"),b.find(".ui-tips-arrow").css("left",d-e+"px")}}}),$("#J_filter").tips({trigger:".fdg-item",hasClose:!1,align:["bottom","center"],tipsClass:"ui-tips-price-grid"});function A(a,b){try{JA.tracker.ngloader(a,$.extend({url:window.location.href},b))}catch(c){}}if($("#J_filter").find(".f-datagrid").length>0){var B=$(".f-datagrid");var C=readCookie("pg");if(!C){A("search.000013",{logtype:0});var D='<div id="guide-price">    <div class="mask"></div>    <div class="guide-content"><a href="javascript:;" class="btn-sure"></a></div></div>';$("body").append(D);var E=$("#guide-price");var F=B.offset().top,G=B.offset().left;E.css("height",$(document).height()).find(".guide-content").css({left:G,top:F}),E.delegate(".btn-sure","click",function(a){a.preventDefault(),E.hide(),A("search.000013",{logtype:1})}),window.history&&"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual");var H=F-($(window).height()-186)/2;$(document).ready(function(){E.show(),$("body, html").scrollTop(H)}),createCookie("pg",!0,365)}}});
