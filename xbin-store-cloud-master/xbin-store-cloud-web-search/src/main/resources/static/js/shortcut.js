/* jdf-1.0.0/ shortcut.js Date:2017-02-09 17:08:52 */
define("/js/shortcut.js",["/jslog.js","/js/dropdown.js","/jsareamini.js","/js/setUserInfo.js","/js/myjd.js","/js/localStorage.js","/js/cookie.js"],function(require){require("/js/log.js");require("/js/dropdown.js");require("/js/areamini.js");var f=require("/js/setUserInfo.js");var g=require("/js/myjd.js");var h=require("/js/localStorage.js");var i=require("/js/cookie.js");function j(){var a=$("#footer-2014 .copyright");if(a.length){var b=a.html();var c=(new Date).getFullYear();2016==c&&a.html(b.replace("2004-2015","2004-2016"))}}function k(){j();var a=$("#shortcut-2014");var b='<div class="dd-spacer"></div><div class="dd-inner"><span class="loading"></span></div>';f({el:$("#ttbar-login")});var c='			<div class="dt cw-icon ui-areamini-text-wrap" style="display:none;">				<i class="ci-right"><s>\u25c7</s></i>				\u9001\u81f3\uff1a<span class="ui-areamini-text"></span> 			</div>			<div class="dd dorpdown-layer">				<div class="dd-spacer"></div>				<div class="ui-areamini-content-wrap"> 					<div class="ui-areamini-content"></div> 				</div> 			</div>		';$("#ttbar-mycity").html(c).areamini({hasCssLink:!1,className:{hover:"hover",selected:"selected"},provinceList:[{name:"\u6d77\u5916",tpl:'<div class="item"><a href="//en.jd.com/" target="_blank" data-onchange="1"><%=name%></a></div>'}],tplContentWrap:'<div class="ui-areamini-content-list"><%=list%></div>',tplContentItem:'<div class="item"><a data-id="<%=id%>" href="javascript:void(0)"><%=name%></a></div>',syncServer:!0,writeCookie:!1,threeWordDeal:function(a){var b=a.find(".ui-areamini-text").html();var c=a.find(".dd-spacer");3==b.length?c.addClass("dd-spacer-extend"):c.removeClass("dd-spacer-extend")},onReady:function(){this.el.find(".ui-areamini-text-wrap").show();var b=i("areaId");if(h.check()&&b){var c="areaId";h.get(c)?h.get(c)!=b&&(h.set(c,b),h.clearByReg("^jd_home_2015_")):h.set(c,b)}this.options.threeWordDeal(this.el)},onChange:function(a,b){this.options.threeWordDeal(this.el),"undefined"!=typeof b&&window.location.reload()}}),g();var d='			<div class="dd dorpdown-layer">				<div class="dd-spacer"></div>				<div class="dd-inner" id="ttbar-apps-main">'+b+"				</div>			</div>		";$("#ttbar-apps").append(d).attr("aid","2_955_6342").dropdown({enterDelay:50,trigger:!0,current:"hover",onchange:function(a){a.attr("data-load")||(a.attr("data-load",1),$.ajax({url:"//nfa.jd.com/loadFa.js?aid=2_955_6342",dataType:"script",success:function(){}}))}});var e='			<div class="dd dorpdown-layer">				<div class="dd-spacer"></div>				<div class="dd-inner" id="ttbar-atte-main">'+b+"				</div>			</div>		";$("#ttbar-atte").append(e).attr("aid","2_955_6494").dropdown({enterDelay:50,trigger:!0,current:"hover",onchange:function(a){a.attr("data-load")||(a.attr("data-load",1),$.ajax({url:"//nfa.jd.com/loadFa.js?aid=2_955_6494",dataType:"script",success:function(){}}))}}),a.find("#ttbar-serv .dd").html(b),a.find("#ttbar-serv").dropdown({enterDelay:50,trigger:!0,current:"hover",onchange:function(b){if(!b.attr("data-load")){b.attr("data-load",1);var c=setTimeout(function(){d("//d.jd.com/client/get")},3e3);var d=function(b){$.ajax({url:b,dataType:"jsonp",scriptCharset:"gb2312",cache:!0,jsonpCallback:"getClientCallback",success:function(b){if(b&&"object"==typeof b){clearTimeout(c),b=b.data;var d='<div class="dd-spacer"></div>';var e=['<div class="item-client">\u5ba2\u6237</div>'];var f=['<div class="item-business">\u5546\u6237</div>'];$.each(b,function(a){var c=b[a];var d=!c.type;0==c.c&&e.push('<div class="item"><a href="'+c.u+'" target="_blank" '+d+">"+c.n+"</a></div>"),1==c.c&&f.push('<div class="item"><a href="'+c.u+'" target="_blank" '+d+">"+c.n+"</a></div>")}),d+=e.join(""),f.length>1&&(d+=f.join("")),a.find("#ttbar-serv .dd").html(d)}}})};d("//dc.3.cn/client/get")}}}),a.find("#ttbar-navs .dd").html(b),a.find("#ttbar-navs").dropdown({enterDelay:50,trigger:!0,current:"hover",leaveDelay:100,onchange:function(b){if(!b.attr("data-load")){b.attr("data-load",1);var c=setTimeout(function(){d("//d.jd.com/navigation/get")},3e3);var d=function(b){$.ajax({url:b,dataType:"jsonp",scriptCharset:"gb2312",cache:!0,jsonpCallback:"getNavigationCallback",success:function(b){if(b&&"object"==typeof b){clearTimeout(c),b=b.data;var d='<div class="dd-spacer"></div>';$.each(b,function(a){var c=b[a];var e=c.s;var f="";$.each(e,function(a){var b=e[a];var c=b.c?'class="'+b.c+'"':"";f+='<div class="item"><a href="'+b.u+'" target="_blank" '+c+">"+b.n+"</a></div>"});var g=c.n;var h=c.c?'class="'+c.c+'"':"";c.u&&(g='<a href="'+c.u+'" target="_blank" '+h+">"+c.n+"</a>"),d+='<dl class="fore'+(a+1)+'">									<dt>'+g+"</dt>									<dd>										"+f+"									</dd>								</dl>"}),a.find("#ttbar-navs .dd").html(d)}}})};d("//dc.3.cn/navigation/get")}}})}return k});
