/* jdf-1.0.0/ areamini.js Date:2017-02-09 17:08:54 */
!function(a){var c=window;var e=[1,72,0,0];var f=e.join("-");var g=-1;var h={province:{"\u5317\u4eac":1,"\u4e0a\u6d77":2,"\u5929\u6d25":3,"\u91cd\u5e86":4,"\u6cb3\u5317":5,"\u5c71\u897f":6,"\u6cb3\u5357":7,"\u8fbd\u5b81":8,"\u5409\u6797":9,"\u9ed1\u9f99\u6c5f":10,"\u5185\u8499\u53e4":11,"\u6c5f\u82cf":12,"\u5c71\u4e1c":13,"\u5b89\u5fbd":14,"\u6d59\u6c5f":15,"\u798f\u5efa":16,"\u6e56\u5317":17,"\u6e56\u5357":18,"\u5e7f\u4e1c":19,"\u5e7f\u897f":20,"\u6c5f\u897f":21,"\u56db\u5ddd":22,"\u6d77\u5357":23,"\u8d35\u5dde":24,"\u4e91\u5357":25,"\u897f\u85cf":26,"\u9655\u897f":27,"\u7518\u8083":28,"\u9752\u6d77":29,"\u5b81\u590f":30,"\u65b0\u7586":31,"\u6e2f\u6fb3":52993,"\u53f0\u6e7e":32,"\u9493\u9c7c\u5c9b":84},city:{1:"1-72-2799",2:"2-2813-51976",3:"3-51035-39620",4:"4-113-9775",5:"5-142-143",6:"6-303-304",7:"7-412-415",8:"8-560-567",9:"9-639-640",10:"10-727-728",11:"11-799-801",12:"12-904-905",13:"13-2900-2908",14:"14-1151-1153",15:"15-1158-1224",16:"16-1303-1305",17:"17-1432-1435",18:"18-1482-1485",19:"19-1601-3633",20:"20-3168-3169",21:"21-1827-1828",22:"22-2103-2105",23:"23-3690-3693",24:"24-2144-2145",25:"25-4108-6823",26:"26-3970-3972",27:"27-2428-2429",28:"28-2525-2526",29:"29-2580-2581",30:"30-2628-2629",31:"31-4110-4122",52993:"52993-52994-52996",32:"32-2768-2769",84:"84-1310-0"},area:{},provinceList:null};h.province=function(){var b={};return a.each(h.province,function(a,c){b["_"+c]=a}),b}();var i=function(a,b,c){if("undefined"==typeof b){var i=null;if(document.cookie&&""!=document.cookie){var j=document.cookie.split(";");for(var k=0;k<j.length;k++){var l=jQuery.trim(j[k]).split("=");if(l[0]==a&&l.length>1){try{i=decodeURIComponent(l[1])}catch(m){i=l[1]}break}}}return i}c=c||{},null===b&&(b="",c.expires=-1);var d="";if(c.expires&&("number"==typeof c.expires||c.expires.toUTCString)){var e;"number"==typeof c.expires?(e=new Date,e.setTime(e.getTime()+24*c.expires*60*60*1e3)):e=c.expires,d="; expires="+e.toUTCString()}var f=c.path?"; path="+c.path:"";var g=c.domain?"; domain="+c.domain:"";var h=c.secure?"; secure":"";document.cookie=[a,"=",encodeURIComponent(b),d,f,g,h].join("")};function j(a){return(a||"").replace(/(^\s*)|(\s*$)/g,"")}function k(a){var b=arguments;if(b.length>1){for(var c=0,d=b.length;d>c;c++)if(k(b[c]))return!0;return!1}return"undefined"===String(a)||"null"===String(a)||("string"==typeof a?""===j(a):!1)}function l(a,b){var c={provinceId:0,provinceName:"",cityId:0,cityName:"",districtId:0,districtName:"",townId:0,townName:""};var d=a.split("-");0==d[0]&&(d=e);var f=n(d[0]).value;c.provinceId=f.id,c.provinceName=f.name,b(c)}function m(){var b=[];return h.provinceList&&h.provinceList.length>0?b=h.provinceList:(a.each(h.province,function(a,c){b.push({id:a.replace("_",""),name:c})}),h.provinceList=b),b}function n(a){var b={id:a,name:""};var c=0;var d=h.province["_"+a];return d||(d=h.province["_"+e[0]],c=1,b.id=e[0]),b.name=d,{value:b,isDefault:c}}function o(a,b){l(a.initArea||i(a.cookieMapping.allLocal)||a.defaultArea||f,b)}function p(a){return a&&[{id:a.provinceId,name:a.provinceName},{id:a.cityId,name:a.cityName},{id:a.districtId,name:a.districtName},{id:a.townId,name:a.townName}]||[]}function q(b,c,d){a.each(p(b),function(a,b){k(b.id)||0==b.id||(c.push(b.id),d.push(b.name))})}function r(b,c,d,e){var f="";if(c.name.length>=d.longerAreaSize?f="longer-area":c.name.length>=d.longAreaSize&&(f="long-area"),e&&d.className.selected||f){var g=a(b);e&&d.className.selected&&g.find("a:first").addClass(d.className.selected),f&&g.addClass(f),b=a("<div/>").html(g).html(),b=b.replace(/&lt;/g,"<").replace(/&gt;/g,">")}return c.tpl?a.tpl(c.tpl,c):a.tpl(b,c)}function s(b,c,d,e){var f=this;var g=f.options.provinceList;var h=[];var i=[];return i=g?g:m(),a.each(i,function(a,b){h.push(r(c,b,f.options,b.id==e.provinceId))}),a.tpl(b,{list:h.join(""),index:d})}function t(){var b=this;var c=b.el;var d=b.options;var e=d.className;a("."+e.content_content,c).undelegate("a[data-id]","click").delegate("a[data-id]","click",function(f){f.preventDefault();var g=a(this);var h={id:g.data("id"),name:g.html()};var i=y(c,h.id,0);d.className.selected&&a("."+e.content_content+" a."+d.className.selected,c).removeClass(d.className.selected),l(i,function(c){d.className.selected&&g.addClass(d.className.selected),d.selectedClose&&v.call(b,!1),A.call(b,c),a.isFunction(d.onChange)&&d.onChange.call(b,g,h,c),d.writeCookie&&u(d,c.provinceId,i)})}),a("."+e.content_content,c).undelegate("a[data-onchange=1]","click").delegate("a[data-onchange=1]","click",function(){var f=a(this);d.className.selected&&(a("."+e.content_content+" a."+d.className.selected,c).removeClass(d.className.selected),f.addClass(d.className.selected)),d.selectedClose&&v.call(b,!1),a.isFunction(d.onChange)&&d.onChange.call(b,f)})}function u(a,b,c){i(a.cookieMapping.areaId,b,a.cookieOpts),i(a.cookieMapping.allLocal,c,a.cookieOpts)}function v(a){var b=this;var c=b.options.className.hover;a?(g>-1&&(clearTimeout(g),g=-1),w.call(b),b.el.addClass(c),g=setTimeout(function(){b.el.addClass(c)},1)):(g>-1&&(clearTimeout(g),g=-1),b.el.removeClass(c))}function w(){var b=this;var d=b.el;var e=a(b.css.content);var f=a(b.css.text).width();var g=e.width();var h=a(c).width();var i=d.offset().left;var j=a(b.css.text).offset().left;if(e.data("left")?e.css("left",e.data("left")):e.data("left",e.css("left")),i+g>h){var k=g-f-10;k>j&&(k-=k-j+f-20),e.css({left:"-"+k+"px"})}else i<-1*parseInt(e.css("left"))&&e.css({left:"0px"})}function x(a){return a?[a.provinceId,a.cityId,a.districtId,a.townId]:[0,0,0,0]}function y(a,b){var d=a.data("select-local");return d=d&&d.split("-")||[0,0,0,0],"object"==typeof b?d=x(b):(d=h.city[b],d&&(d=(d+"-0").split("-"))),d=d.join("-"),a.data("select-local",d),d}function z(b,c){var d=this;var e=d.el;var f=d.options;var g=f.tplContentWrap;var h=f.tplContentItem;a(d.css.content_content).html(s.call(d,g,h,0,b)),-1==c&&y(e,b),t.call(d,f)}function A(b){var c=this;var d=[],e=[];q(b,e,d),e=e.join("-"),d=d.join(""),a(c.css.text_text).html(d).attr("data-id",e).attr("title",d)}function B(b,c){var d={};return a.each(c,function(e,f){var g=e.split("_");var h=[];var i=g.length;a.each(g,function(a,b){return h.push("."+c[b]),i>1&&2+a==i?(h.push("."+f),!1):void 0}),d[e]=b+" "+h.join(" ")}),d}a.ui.define("areamini",{options:{hasCssLink:!0,baseVersion:"1.0.0",cssLinkVersion:"1.0.0",initArea:null,defaultArea:null,provinceList:null,provinceExtend:!0,longAreaSize:4,longerAreaSize:12,cookieMapping:{areaId:"areaId",allLocal:"ipLoc-djd"},writeCookie:!0,cookieOpts:{expires:null,path:null,domain:null,secure:null},className:{hover:"ui-areamini-hover",text:"ui-areamini-text-wrap",text_text:"ui-areamini-text",content:"ui-areamini-content-wrap",close:"ui-areamini-close",content_tab:"ui-areamini-tab",content_content:"ui-areamini-content",content_content_list:"ui-areamini-content-list",selected:""},tplContentWrap:'<ul class="ui-areamini-content-list"><%=list%></ul>',tplContentItem:'<li><a data-id="<%=id%>" href="javascript:void(0)"><%=name%></a></li>',event:"hover",onReady:null,onChange:null,selectedClose:!0},css:{},init:function(){var b=this;var c=b.options;var d=b.el;c.scopeLevel=1,b.css=B("#"+d[0].id,c.className),c.provinceList&&c.provinceExtend&&(c.provinceList=a.extend(!0,[],m().concat(c.provinceList))),c.syncServer&&!c.writeCookie&&(c.writeCookie=!0,c.cookieOpts={expires:30,path:"/",domain:document.domain}),o(c,function(e){A.call(b,e),z.call(b,e,-1);var f="hover"==c.event?"mouseenter":"click";a(b.css.text).bind(f,function(){return v.call(b,!0),!1}),a(d).bind("mouseleave",function(){v.call(b,!1)}),a(b.css.close).bind("click",function(){v.call(b,!1)}),a.isFunction(c.onReady)&&c.onReady.call(b,e)})},hide:function(){var a=this;var b=a.options.className.hover;a.el.removeClass(b)},show:function(){var a=this;var b=a.options.className.hover;a.el.addClass(b)}})}(jQuery);
