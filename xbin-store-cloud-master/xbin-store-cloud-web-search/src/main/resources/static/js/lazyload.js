/* jdf-1.0.0/ lazyload.js Date:2017-02-09 17:08:54 */
!function(a){var c="done";function d(b,d,e){var f=function(c){b.removeClass(e.placeholderClass),a.isFunction(e.onLoadImg)&&(c&&d==e.blankImgUrl&&(c=!1),e.onLoadImg.call(b,c)),b[0].onload=b[0].onerror=null};var g=b[0].onerror;b[0].onerror=function(){a.isFunction(g)?g.call(b[0]):b.attr("src",e.blankImgUrl).addClass(e.errorClass),f(!1)},b[0].onload=function(){f(!0)},d||b.attr("src")||(d=e.blankImgUrl),b.attr("src",d),b.attr(e.source,c),a.isFunction(e.onchange)&&e.onchange.call(b)}function e(b,c,d){"function"==typeof define&&define.cmd?seajs.use(b,function(a){a.init(c),d()}):(a.ajax({url:b,dataType:"script",cache:!0}),d())}function f(a,b,d){"0"==a.attr("data-lazyload-fn")&&(a.attr("data-lazyload-fn",c),d(),b.onchange&&b.onchange(a))}a.ui.define("lazyload",{options:{type:"img",source:"data-lazy-path",init:"data-lazy-init",delay:100,space:100,onchange:null,onLoadImg:null,placeholderClass:"loading-style2",errorClass:"err-poster",blankImgUrl:"//misc.360buyimg.com/lib/img/e/blank.gif"},init:function(){var b=this;var g=this.options;var h=null;var i=null;var j=null;"img"==g.type&&("data-lazy-path"==g.source&&(g.source="data-lazy-img"),j=g.source+"-install");var k="div";if("img"==g.type){if(k="IMG",h=a("img["+g.source+"]["+g.source+"!=done]",b.el),i=h.size(),!i)return!1}else"fn"==g.type&&(k=g.source);b.isNonTopTag=!(b.el.is("body,html")||b.el.is(document));var l=function(){h="img"==g.type?a("img["+g.source+"]["+g.source+"!=done]",b.el):a(k,b.el),i=h.size();var l=a(document).scrollTop();b.isNonTopTag&&b.el.scrollTop()&&(l+=b.el.scrollTop()-b.el.height()+g.space);var m=l+a.page.clientHeight()+g.space;a.each(h,function(){var h=a(this);var j=null;if(("js"==g.type||"img"==g.type)&&(j=h.attr(g.source)),j||"fn"==g.type||"img"==g.type){var k=b.getTop(h[0]);if(k>0&&i>0&&k>l-h.outerHeight()&&m>k){var n=h.attr(g.init);"img"==g.type?(n=h.attr(g.source),n!=c?(d(h,n,g),i-=1):n==c&&(i-=1)):"js"==g.type?h.attr(g.init)!=c&&e(j,n,function(){i-=1,h.attr(g.init,c)}):"fn"==g.type&&f(h,g,function(){i-=1})}}}),i||(j&&b.el.removeAttr(j),b.isNonTopTag&&a(b.el).unbind("scroll",n),a(window).unbind("scroll",n),a(window).unbind("resize",n))};var m=setTimeout(l,0);var n=function(){m&&clearTimeout(m),m=setTimeout(l,g.delay)};return j&&"1"==b.el.attr(j)?!1:(j&&b.el.attr(j,1),b.isNonTopTag&&a(b.el).bind("scroll",n),a(window).bind("scroll",n),a(window).bind("resize",n),void("fn"==g.type&&g.source.attr("data-lazyload-fn","0")))},getTop:function(a){var b=a.offsetTop;if(null!=a.parentNode){var c=a.offsetParent;for(;null!=c;)b+=c.offsetTop,c=c.offsetParent}return b}})}(jQuery);